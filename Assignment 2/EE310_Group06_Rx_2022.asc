Version 4
SHEET 1 6180 2120
WIRE 2480 -1056 2368 -1056
WIRE 2656 -1056 2544 -1056
WIRE 2368 -960 2368 -1056
WIRE 2464 -960 2368 -960
WIRE 2656 -960 2656 -1056
WIRE 2656 -960 2544 -960
WIRE 2720 -960 2656 -960
WIRE 3232 -944 3120 -944
WIRE 3392 -944 3312 -944
WIRE 3472 -944 3392 -944
WIRE 3648 -944 3552 -944
WIRE 1584 -928 832 -928
WIRE 1024 -864 960 -864
WIRE 1136 -864 1088 -864
WIRE 192 -848 160 -848
WIRE 224 -848 192 -848
WIRE 320 -848 304 -848
WIRE 2208 -816 2048 -816
WIRE 2368 -816 2368 -960
WIRE 2368 -816 2208 -816
WIRE 2448 -816 2368 -816
WIRE 2656 -800 2656 -960
WIRE 2656 -800 2512 -800
WIRE 3392 -800 3392 -944
WIRE 3472 -800 3392 -800
WIRE 2448 -784 2416 -784
WIRE 3648 -784 3648 -944
WIRE 3648 -784 3536 -784
WIRE 3744 -784 3648 -784
WIRE 320 -768 320 -848
WIRE 384 -768 320 -768
WIRE 3280 -768 3184 -768
WIRE 3472 -768 3280 -768
WIRE 2416 -736 2416 -784
WIRE 2512 -736 2416 -736
WIRE 1584 -720 1584 -928
WIRE 1600 -720 1584 -720
WIRE 1696 -720 1680 -720
WIRE 2048 -720 2048 -816
WIRE 2208 -720 2208 -816
WIRE 2368 -720 2368 -816
WIRE 3280 -720 3280 -768
WIRE 832 -704 832 -928
WIRE 864 -704 832 -704
WIRE 960 -704 960 -864
WIRE 960 -704 944 -704
WIRE 2512 -704 2512 -736
WIRE 192 -688 192 -848
WIRE 224 -688 192 -688
WIRE 1424 -688 1360 -688
WIRE 320 -672 320 -768
WIRE 320 -672 288 -672
WIRE 960 -672 960 -704
WIRE 976 -672 960 -672
WIRE 1584 -672 1584 -720
WIRE 1584 -672 1488 -672
WIRE -208 -656 -240 -656
WIRE -80 -656 -144 -656
WIRE 32 -656 -80 -656
WIRE 192 -656 112 -656
WIRE 224 -656 192 -656
WIRE 1136 -656 1136 -864
WIRE 1136 -656 1040 -656
WIRE 1200 -656 1136 -656
WIRE 1392 -656 1280 -656
WIRE 1424 -656 1392 -656
WIRE 976 -640 864 -640
WIRE -80 -624 -80 -656
WIRE 3280 -592 3280 -640
WIRE 2048 -560 2048 -640
WIRE 2208 -560 2208 -656
WIRE 2208 -560 2048 -560
WIRE 2368 -560 2368 -640
WIRE 2368 -560 2208 -560
WIRE 1392 -544 1392 -656
WIRE 1440 -544 1392 -544
WIRE 1584 -544 1584 -672
WIRE 1584 -544 1520 -544
WIRE 2208 -480 2208 -560
WIRE 1248 -160 1024 -160
WIRE 1472 -160 1248 -160
WIRE 1472 -112 1472 -160
WIRE 1024 -96 1024 -160
WIRE 3408 -16 3264 -16
WIRE 3552 -16 3472 -16
WIRE 3760 -16 3552 -16
WIRE 256 0 256 -32
WIRE 1248 32 1248 -160
WIRE 2576 32 2576 0
WIRE 1024 80 1024 -16
WIRE 1184 80 1024 80
WIRE 80 96 -272 96
WIRE 256 112 256 80
WIRE 256 112 144 112
WIRE 320 112 256 112
WIRE 3552 112 3552 -16
WIRE 3600 112 3552 112
WIRE -128 128 -272 128
WIRE -32 128 -48 128
WIRE 80 128 -32 128
WIRE 2256 128 2144 128
WIRE 2400 128 2336 128
WIRE 3760 128 3760 -16
WIRE 3760 128 3664 128
WIRE 2576 144 2576 112
WIRE 2576 144 2464 144
WIRE 2640 144 2576 144
WIRE 3136 144 3088 144
WIRE 3264 144 3264 -16
WIRE 3264 144 3216 144
WIRE 3296 144 3264 144
WIRE 3424 144 3376 144
WIRE 3600 144 3424 144
WIRE 2192 160 2144 160
WIRE 2320 160 2272 160
WIRE 2400 160 2320 160
WIRE 1472 176 1472 -48
WIRE 3424 208 3424 144
WIRE 1024 224 1024 80
WIRE 1248 224 1248 128
WIRE 1408 224 1248 224
WIRE -32 256 -32 128
WIRE 48 256 -32 256
WIRE 256 256 256 112
WIRE 256 256 128 256
WIRE 1248 304 1248 224
WIRE 1472 304 1472 272
WIRE 2320 304 2320 160
WIRE 2400 304 2320 304
WIRE 2576 304 2576 144
WIRE 2576 304 2480 304
WIRE 3424 320 3424 272
WIRE 1024 400 1024 304
WIRE 1248 400 1248 384
WIRE 1248 400 1024 400
WIRE 1472 400 1472 384
WIRE 1472 400 1248 400
WIRE 1248 416 1248 400
FLAG 1088 1360 0
FLAG 1088 1280 Vin
FLAG 2208 -480 0
FLAG 3488 -544 0
FLAG 2480 -768 0
FLAG 2480 -832 Vsupply
FLAG 3488 -624 Vbias
FLAG 2512 -704 Vbias
FLAG 3280 -592 Vbias
FLAG 2720 -960 Vdet
FLAG 3120 -768 Vdet
FLAG 2432 112 Vsupply
FLAG 2432 176 0
FLAG 2144 128 Vbias
FLAG 2576 0 Vsupply
FLAG 2640 144 Vrx
FLAG 800 1360 0
FLAG 800 1280 Vsupply
FLAG 1136 -656 Vtri
FLAG 1456 -640 0
FLAG 1008 -624 0
FLAG 864 -640 Vref
FLAG 1360 -688 Vref
FLAG 1584 -672 Vsq
FLAG 1008 -688 Vsupply
FLAG 1456 -704 Vsupply
FLAG 1696 -720 Vsupply
FLAG 80 -848 0
FLAG 192 -576 Vref
FLAG 256 -640 0
FLAG 256 -704 Vsupply
FLAG -80 -544 0
FLAG 112 80 Vsupply
FLAG 112 144 0
FLAG 384 -768 Visc
FLAG -272 96 Vtri
FLAG 256 -32 Vsupply
FLAG 320 112 Vpwm
FLAG 1248 -160 Vsupply
FLAG 1024 80 Vpwm
FLAG 1248 416 0
FLAG -240 -656 Vin
FLAG -272 128 Visc
FLAG 3744 -784 Vamp
FLAG 2144 160 Vamp
FLAG 3424 320 0
FLAG 3632 96 Vsupply
FLAG 3632 160 0
FLAG 3760 128 Vout
FLAG 816 1648 0
FLAG 816 1568 Vref
FLAG 3120 -944 Vbias
FLAG 3504 -816 Vsupply
FLAG 3504 -752 0
FLAG 3280 -768 Vhf
FLAG 3088 144 Vrx
SYMBOL voltage 1088 1264 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE({Vin_offset} {A} {f})
SYMBOL LED 1456 -112 R0
SYMATTR InstName D1
SYMATTR Value KA3529
SYMBOL bi 2048 -720 R0
WINDOW 3 -85 297 Left 2
SYMATTR Value I=0.55e-6*I(D1)+15e-9*white(1e8*time)
SYMATTR InstName I_P
SYMBOL cap 2192 -720 R0
WINDOW 3 34 39 Left 2
WINDOW 0 32 8 Left 2
SYMATTR Value 4.25p
SYMATTR InstName C_0
SYMBOL res 2352 -736 R0
WINDOW 3 36 68 Left 2
SYMATTR Value 16.6G
SYMATTR InstName R_leak
SYMBOL cap 2544 -1072 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 7.5p
SYMBOL res 2560 -976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL voltage 3488 -640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 2.5
SYMBOL cap 3184 -784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 47n
SYMBOL res 3264 -736 R0
SYMATTR InstName R2
SYMATTR Value 22k
SYMBOL OpAmps\\opamp2 2480 -864 R0
WINDOW 3 32 81 Left 2
SYMATTR Value LM324
SYMATTR InstName U2
SYMBOL res 2560 16 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL OpAmps\\opamp2 3504 -848 R0
WINDOW 3 22 81 Left 2
SYMATTR Value LM324
SYMATTR InstName U4
SYMBOL voltage 800 1264 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {Vsupply}
SYMBOL res 960 -720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R1}
SYMBOL cap 1088 -880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {C1}
SYMATTR SpiceLine Rser=10m
SYMBOL res 1296 -672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R2}
SYMBOL res 1536 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R3}
SYMBOL res 1696 -736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 128 -672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 68k
SYMBOL res 208 -560 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 33k
SYMBOL res 208 -832 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 33k
SYMBOL res 64 -832 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 68k
SYMBOL cap -144 -672 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL res -96 -640 R0
SYMATTR InstName R18
SYMATTR Value 8.2k
SYMBOL res 144 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 27k
SYMBOL res -32 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1k
SYMBOL res 240 -16 R0
SYMATTR InstName R21
SYMATTR Value 1k
SYMBOL OpAmps\\opamp2 256 -736 R0
WINDOW 3 24 82 Left 2
SYMATTR Value LM358
SYMATTR InstName U5
SYMBOL OpAmps\\opamp2 1008 -720 R0
WINDOW 3 22 83 Left 2
SYMATTR Value LM358
SYMATTR InstName U6
SYMBOL OpAmps\\opamp2 1456 -736 R0
WINDOW 3 24 80 Left 2
SYMATTR Value LM393A
SYMATTR InstName U7
SYMBOL OpAmps\\opamp2 112 48 R0
WINDOW 3 22 81 Left 2
SYMATTR Value LM393A
SYMATTR InstName U8
SYMBOL npn 1184 32 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res 1008 -112 R0
SYMATTR InstName R22
SYMATTR Value 2.2k
SYMBOL res 1008 208 R0
SYMATTR InstName R23
SYMATTR Value 1k
SYMBOL res 1232 288 R0
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL res 1456 288 R0
SYMATTR InstName R25
SYMATTR Value 15.95
SYMBOL npn 1408 176 R0
SYMATTR InstName Q2
SYMATTR Value BC639
SYMBOL res 3232 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 18k
SYMBOL res 3392 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 10k
SYMBOL cap 3408 208 R0
SYMATTR InstName C5
SYMATTR Value 2.8297e-09
SYMBOL cap 3472 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 1.1277e-08
SYMBOL OpAmps\\opamp2 3632 64 R0
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL voltage 816 1552 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.35
SYMBOL res 2288 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 2496 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL res 3328 -960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 22k
SYMBOL res 3568 -960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 68k
SYMBOL OpAmps\\opamp2 2432 80 R0
WINDOW 3 22 81 Left 2
SYMATTR Value LM393A
SYMATTR InstName U3
SYMBOL res 2352 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
TEXT 1912 1264 Left 2 !.tran 0 12m 6m
TEXT 1912 1168 Left 2 !.param f=2.5k Vin_offset=3V A=1
TEXT 2048 -840 Left 2 ;Photo-diode
TEXT 2400 -584 Left 1 ;Photo-diode\nWhen the transmitter and receiver are 100mm apart use the equation\nI=9.5e-6*I(D1)+15e-9*white(1e8*time)\n \nWhen the transmitter and receiver are 400mm apart use the equation\nI=0.55e-6*I(D1)+15e-9*white(1e8*time)
TEXT -392 712 Left 7 ;Transmitter
TEXT 1848 704 Left 7 ;Receiver
TEXT 1912 1616 Left 2 !.include LM393A.5_1
TEXT 1912 1656 Left 2 !.include eee305.lib
TEXT 1912 1232 Left 2 !.fourier {f} 100 V(vout)
TEXT 2424 -1120 Left 2 ;two 15pF in series
TEXT 1912 1128 Left 2 !.param C1=1.5n Vref=2 Vsupply=5 R1=10k R2=330k R3=820k
TEXT 1912 1320 Left 2 !.model KA3529 D(Is=1.00E-20 N=1.806 Rs=2.616247 Eg=2.26 Xti=3)
TEXT 1488 392 Left 2 ;27//39ohm
TEXT 1008 -1152 Left 3 ;Triangle Waveform Generator
TEXT -80 -1160 Left 3 ;Input Signal Conditioner
TEXT 1144 -304 Left 3 ;LED Driver
TEXT -32 -304 Left 3 ;PWM Generator
TEXT 1912 1352 Left 2 !.model BC639 NPN (AF= 1.00E+00 BF= 1.29E+02 BR= 2.92E+00 CJC= 4.85E-11 \n+ CJE= 1.17E-10 CJS= 0.00E+00 EG= 1.11E+00 FC= 5.00E-01 IKF= 9.06E-01 \n+ IKR= 1.00E+00 IRB= 2.38E-02 IS= 3.06E-15 ISC= 4.08E-14   ISE= 1.62E-16 \n+ ITF= 5.64E-01 KF=0.00E+00 MJC= 5.09E-01 MJE= 4.22E-01 MJS= 3.30E-01 \n+ NC=1.00E+00 NE= 1.00E+00 NF= 8.55E-01 NR= 9.10E-01 PTF=0.00E+00 \n+ RB= 1.65E+01 RBM= 1.73E-02 RC= 3.11E-01 RE= 1.26E-02 TF= 1.42E-09  \n+ TR= 0.00E+00 VAF= 7.24E+02 VAR=5.46E+01 VJC= 3.00E-01 VJE= 3.00E-01 \n+ VJS= 7.50E-01 VTF=9.99E+05 XCJC= 1.00E+00 XTB= 0.00E+00 \n+ XTF= 7.75E-01 XTI=3.00E+00)
TEXT 768 1408 Left 2 ;L78L05ACZ 5V DC\nlinear regulator
TEXT 936 944 Left 3 ;Voltage Sources/Signals
TEXT -400 -1584 Left 5 ;ELECTENG 310 Assignment2\nGroup 6\n \nThomas Cummings\nDemian Pillay\nAshley v.d. Merwe
TEXT 1096 1408 Left 2 !.fourier {f} 100 V(vout)
TEXT 2320 -1152 Left 3 ;Light Detector
TEXT 3344 -1152 Left 3 ;High-pass filter/Amplification
TEXT 2272 -304 Left 3 ;PWM Regenerator
TEXT 3352 -304 Left 3 ;Low-pass filter
TEXT 2352 888 Left 3 ;Setup
TEXT -400 1816 Left 2 ;.ac dec 10 1 10k
LINE Normal 1792 -352 -384 -352
LINE Normal 2928 640 2928 -1200
LINE Normal 736 640 736 -1200
LINE Normal 4048 -352 1856 -352
RECTANGLE Normal -400 -1200 1792 640
RECTANGLE Normal -400 -1200 1792 640
RECTANGLE Normal 1856 -1200 4048 640
RECTANGLE Normal 688 1808 1792 848
RECTANGLE Normal 1872 1808 2976 848
