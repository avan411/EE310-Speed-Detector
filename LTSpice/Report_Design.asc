Version 4
SHEET 1 7668 2120
WIRE 2496 -1008 2368 -1008
WIRE 2656 -1008 2560 -1008
WIRE 1456 -928 704 -928
WIRE 2368 -912 2368 -1008
WIRE 2480 -912 2368 -912
WIRE 2656 -912 2656 -1008
WIRE 2656 -912 2560 -912
WIRE 2720 -912 2656 -912
WIRE 3232 -896 3136 -896
WIRE 3696 -896 3232 -896
WIRE 336 -864 304 -864
WIRE 368 -864 336 -864
WIRE 464 -864 448 -864
WIRE 896 -864 832 -864
WIRE 1008 -864 960 -864
WIRE 3232 -848 3232 -896
WIRE 464 -784 464 -864
WIRE 528 -784 464 -784
WIRE 2208 -768 2048 -768
WIRE 2368 -768 2368 -912
WIRE 2368 -768 2208 -768
WIRE 2448 -768 2368 -768
WIRE 2656 -752 2656 -912
WIRE 2656 -752 2512 -752
WIRE 2448 -736 2416 -736
WIRE 1456 -720 1456 -928
WIRE 1472 -720 1456 -720
WIRE 1568 -720 1552 -720
WIRE 3232 -720 3232 -768
WIRE 336 -704 336 -864
WIRE 368 -704 336 -704
WIRE 704 -704 704 -928
WIRE 736 -704 704 -704
WIRE 832 -704 832 -864
WIRE 832 -704 816 -704
WIRE 464 -688 464 -784
WIRE 464 -688 432 -688
WIRE 1296 -688 1232 -688
WIRE 2416 -688 2416 -736
WIRE 2512 -688 2416 -688
WIRE -64 -672 -96 -672
WIRE 64 -672 0 -672
WIRE 176 -672 64 -672
WIRE 336 -672 256 -672
WIRE 368 -672 336 -672
WIRE 832 -672 832 -704
WIRE 848 -672 832 -672
WIRE 1456 -672 1456 -720
WIRE 1456 -672 1360 -672
WIRE 2048 -672 2048 -768
WIRE 2208 -672 2208 -768
WIRE 2368 -672 2368 -768
WIRE 1008 -656 1008 -864
WIRE 1008 -656 912 -656
WIRE 1072 -656 1008 -656
WIRE 1264 -656 1152 -656
WIRE 1296 -656 1264 -656
WIRE 2512 -656 2512 -688
WIRE 64 -640 64 -672
WIRE 848 -640 736 -640
WIRE 1264 -544 1264 -656
WIRE 1312 -544 1264 -544
WIRE 1456 -544 1456 -672
WIRE 1456 -544 1392 -544
WIRE 2048 -512 2048 -592
WIRE 2208 -512 2208 -608
WIRE 2208 -512 2048 -512
WIRE 2368 -512 2368 -592
WIRE 2368 -512 2208 -512
WIRE 2208 -496 2208 -512
WIRE 1056 -336 832 -336
WIRE 1280 -336 1056 -336
WIRE 3328 -304 3184 -304
WIRE 3472 -304 3392 -304
WIRE 3680 -304 3472 -304
WIRE 1280 -288 1280 -336
WIRE 832 -272 832 -336
WIRE 2432 -224 2432 -256
WIRE 400 -176 400 -208
WIRE 3472 -176 3472 -304
WIRE 3520 -176 3472 -176
WIRE 3680 -160 3680 -304
WIRE 3680 -160 3584 -160
WIRE 1056 -144 1056 -336
WIRE 3024 -144 3008 -144
WIRE 3056 -144 3024 -144
WIRE 3184 -144 3184 -304
WIRE 3184 -144 3136 -144
WIRE 3216 -144 3184 -144
WIRE 3344 -144 3296 -144
WIRE 3520 -144 3344 -144
WIRE 2256 -128 1904 -128
WIRE 2432 -112 2432 -144
WIRE 2432 -112 2320 -112
WIRE 2496 -112 2432 -112
WIRE 832 -96 832 -192
WIRE 992 -96 832 -96
WIRE 2256 -96 1904 -96
WIRE 224 -80 -128 -80
WIRE 3024 -80 3024 -144
WIRE 3344 -80 3344 -144
WIRE 400 -64 400 -96
WIRE 400 -64 288 -64
WIRE 464 -64 400 -64
WIRE 16 -48 -128 -48
WIRE 112 -48 96 -48
WIRE 224 -48 112 -48
WIRE 1280 0 1280 -224
WIRE 3024 32 3024 -16
WIRE 3344 32 3344 -16
WIRE 832 48 832 -96
WIRE 1056 48 1056 -48
WIRE 1216 48 1056 48
WIRE 112 80 112 -48
WIRE 192 80 112 80
WIRE 400 80 400 -64
WIRE 400 80 272 80
WIRE 1056 128 1056 48
WIRE 1280 128 1280 96
WIRE 832 224 832 128
WIRE 1056 224 1056 208
WIRE 1056 224 832 224
WIRE 1280 224 1280 208
WIRE 1280 224 1056 224
WIRE 1056 240 1056 224
WIRE 880 992 784 992
WIRE 1008 992 880 992
WIRE 880 1072 784 1072
WIRE 784 1104 784 1072
WIRE 1008 1408 784 1408
WIRE 784 1520 784 1488
FLAG -400 1504 0
FLAG -400 1424 Vin2
FLAG 2208 -496 0
FLAG 2480 -720 0
FLAG 2480 -784 Vsupply
FLAG 1008 1408 Vbias
FLAG 2512 -656 Vbias
FLAG 3232 -720 Vbias
FLAG 2720 -912 Vdet
FLAG 3072 -896 Vdet
FLAG 2288 -144 Vsupply
FLAG 2288 -80 0
FLAG 1904 -128 Vbias
FLAG 2432 -256 Vsupply
FLAG 2496 -112 Vrx
FLAG -400 1040 0
FLAG -400 960 Vsupply
FLAG 1008 -656 Vtri
FLAG 1328 -640 0
FLAG 880 -624 0
FLAG 736 -640 Vref
FLAG 1232 -688 Vref
FLAG 1456 -672 Vsq
FLAG 880 -688 Vsupply
FLAG 1328 -704 Vsupply
FLAG 1568 -720 Vsupply
FLAG 784 1104 0
FLAG 784 912 Vsupply
FLAG 224 -864 0
FLAG 336 -592 Vref
FLAG 400 -656 0
FLAG 400 -720 Vsupply
FLAG 64 -560 0
FLAG 256 -96 Vsupply
FLAG 256 -32 0
FLAG 528 -784 Visc
FLAG -128 -80 Vtri
FLAG 400 -208 Vsupply
FLAG 464 -64 Vpwm
FLAG 1056 -336 Vsupply
FLAG 832 -96 Vpwm
FLAG 1056 240 0
FLAG -96 -672 Vin
FLAG -128 -48 Visc
FLAG 3696 -896 Vamp
FLAG 1904 -96 Vamp
FLAG 3344 32 0
FLAG 3552 -192 Vsupply
FLAG 2928 -144 Vrx
FLAG 3552 -128 0
FLAG 3680 -160 Vout
FLAG 1008 992 Vref
FLAG 3024 32 0
FLAG -400 1280 0
FLAG -400 1200 Vin
FLAG 784 1520 0
FLAG 784 1328 Vsupply
SYMBOL voltage -400 1408 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE({Vin_offset} {A} {f})
SYMBOL LED 1264 -288 R0
SYMATTR InstName D1
SYMATTR Value KA3529
SYMBOL bi 2048 -672 R0
WINDOW 3 -211 -146 Left 2
SYMATTR Value I=0.55e-6*I(D1)+15e-9*white(1e8*time)
SYMATTR InstName I_P
SYMBOL cap 2192 -672 R0
WINDOW 3 24 36 Left 2
SYMATTR Value 4.25p
SYMATTR InstName C_0
SYMBOL res 2352 -688 R0
WINDOW 3 36 68 Left 2
SYMATTR Value 16.6G
SYMATTR InstName R_leak
SYMBOL cap 2560 -1024 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 7.5p
SYMBOL res 2576 -928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL cap 3136 -912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res 3216 -864 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 2416 -240 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL OpAmps\\opamp2 2288 -176 R0
WINDOW 3 22 81 Left 2
SYMATTR Value LM393A
SYMATTR InstName U4
SYMBOL voltage -400 944 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL res 832 -720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL cap 960 -880 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1.5n
SYMATTR SpiceLine Rser=10m
SYMBOL res 1168 -672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res 1408 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 250k
SYMBOL res 1568 -736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 768 896 R0
SYMATTR InstName R12
SYMATTR Value 18k
SYMBOL res 768 976 R0
SYMATTR InstName R13
SYMATTR Value 27k
SYMBOL res 272 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 68k
SYMBOL res 352 -576 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 33k
SYMBOL res 352 -848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 33k
SYMBOL res 208 -848 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 68k
SYMBOL cap 0 -688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res 48 -656 R0
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL res 288 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 27k
SYMBOL res 112 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1k
SYMBOL res 384 -192 R0
SYMATTR InstName R21
SYMATTR Value 1k
SYMBOL OpAmps\\opamp2 400 -752 R0
WINDOW 3 24 82 Left 2
SYMATTR Value LM358
SYMATTR InstName U5
SYMBOL OpAmps\\opamp2 880 -720 R0
WINDOW 3 22 83 Left 2
SYMATTR Value LM358
SYMATTR InstName U6
SYMBOL OpAmps\\opamp2 1328 -736 R0
WINDOW 3 24 80 Left 2
SYMATTR Value LM393A
SYMATTR InstName U7
SYMBOL OpAmps\\opamp2 256 -128 R0
WINDOW 3 22 81 Left 2
SYMATTR Value LM393A
SYMATTR InstName U8
SYMBOL npn 992 -144 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res 816 -288 R0
SYMATTR InstName R22
SYMATTR Value 2.2k
SYMBOL res 816 32 R0
SYMATTR InstName R23
SYMATTR Value 1k
SYMBOL res 1040 112 R0
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL res 1264 112 R0
SYMATTR InstName R25
SYMATTR Value 15.95
SYMBOL npn 1216 0 R0
SYMATTR InstName Q2
SYMATTR Value BC639
SYMBOL res 3152 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 100k
SYMBOL res 3312 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 10k
SYMBOL cap 3328 -80 R0
SYMATTR InstName C5
SYMATTR Value 390p
SYMBOL cap 3392 -320 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 4.7n
SYMBOL res 864 976 R0
SYMATTR InstName R3
SYMATTR Value 39k
SYMBOL res 3024 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 4.7k
SYMBOL cap 3008 -80 R0
SYMATTR InstName C7
SYMATTR Value 10n
SYMBOL OpAmps\\opamp2 2480 -816 R0
WINDOW 3 22 83 Left 2
SYMATTR Value LM358
SYMATTR InstName U1
SYMBOL OpAmps\\opamp2 3552 -224 R0
WINDOW 3 22 83 Left 2
SYMATTR Value LM358
SYMATTR InstName U2
SYMBOL bv -400 1184 R0
SYMATTR InstName B1
SYMATTR Value V={if(time<{time_change},sin(2*pi* {f1} *time)+{o1},-1*sin(2*pi* {f2} *time)+{o2})}
SYMBOL res 768 1312 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 768 1392 R0
SYMATTR InstName R6
SYMATTR Value 10k
TEXT 2048 -792 Left 2 ;Photo-diode
TEXT -440 480 Left 7 ;Transmitter
TEXT 1776 472 Left 7 ;Receiver
TEXT 1824 1256 Left 2 !.include LM393A.5_1
TEXT 1824 1296 Left 2 !.include eee305.lib
TEXT 1816 800 Left 2 !.fourier {f} 100 V(vout)
TEXT 2560 -968 Left 2 ;15//15
TEXT 1816 952 Left 2 !.model KA3529 D(Is=1.00E-20 N=1.806 Rs=2.616247 Eg=2.26 Xti=3)
TEXT 1296 216 Left 2 ;27//39ohm
TEXT 896 -1048 Left 3 ;Triangle Waveform Generator
TEXT 56 -1040 Left 3 ;Input Signal Conditioner
TEXT 976 -400 Left 3 ;LED Driver
TEXT 96 -376 Left 3 ;PWM Generator
TEXT 1816 984 Left 2 !.model BC639 NPN (AF= 1.00E+00 BF= 1.29E+02 BR= 2.92E+00 CJC= 4.85E-11 \n+ CJE= 1.17E-10 CJS= 0.00E+00 EG= 1.11E+00 FC= 5.00E-01 IKF= 9.06E-01 \n+ IKR= 1.00E+00 IRB= 2.38E-02 IS= 3.06E-15 ISC= 4.08E-14   ISE= 1.62E-16 \n+ ITF= 5.64E-01 KF=0.00E+00 MJC= 5.09E-01 MJE= 4.22E-01 MJS= 3.30E-01 \n+ NC=1.00E+00 NE= 1.00E+00 NF= 8.55E-01 NR= 9.10E-01 PTF=0.00E+00 \n+ RB= 1.65E+01 RBM= 1.73E-02 RC= 3.11E-01 RE= 1.26E-02 TF= 1.42E-09  \n+ TR= 0.00E+00 VAF= 7.24E+02 VAR=5.46E+01 VJC= 3.00E-01 VJE= 3.00E-01 \n+ VJS= 7.50E-01 VTF=9.99E+05 XCJC= 1.00E+00 XTB= 0.00E+00 \n+ XTF= 7.75E-01 XTI=3.00E+00)
TEXT -432 1088 Left 2 ;L78L05ACZ 5V DC\nlinear regulator
TEXT 712 1152 Left 2 ;2.35V reference \ngenerator circuit
TEXT -408 800 Left 3 ;Voltage Sources/Signals
TEXT -432 -1704 Left 5 ;ELECTENG 310 Assignment1\nGroup 6\n \nThomas Cummings\nDemian Pillay\nAshley v.d. Merwe
TEXT 712 1208 Left 2 ;Ideally intended to be 2.35
TEXT 1816 872 Left 2 !.param f=2.5k Vin_offset=3V A=1
TEXT 1816 832 Left 2 !.tran 0 7m 3m
TEXT -376 1328 Left 2 !.param time_change=5m f1=1k f2=2.5k o1=1 o2=1
TEXT 2200 -1136 Left 3 ;Light Detector
TEXT 3352 -1136 Left 3 ;High-pass Filter
TEXT 2176 -400 Left 3 ;PWM Regenerator
TEXT 3304 -416 Left 3 ;Low-pass Filter
TEXT 712 1568 Left 2 ;2.5V bias \ngenerator circuit
TEXT 712 1624 Left 2 ;Ideally intended to be 2.5V
RECTANGLE Normal 1760 400 672 -448 2
RECTANGLE Normal 1760 -464 672 -1312 2
RECTANGLE Normal 1760 400 672 -448 2
RECTANGLE Normal 656 400 -432 -448 2
RECTANGLE Normal 656 -464 -432 -1312 2
RECTANGLE Normal 2864 -464 1776 -1312 2
RECTANGLE Normal 3968 -464 2880 -1312 2
RECTANGLE Normal 2864 400 1776 -448 2
RECTANGLE Normal 3968 400 2880 -448 2
RECTANGLE Normal 1760 416 -448 -1328
RECTANGLE Normal 3984 416 1776 -1328
