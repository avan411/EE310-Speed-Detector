Version 4
SHEET 1 7044 1140
WIRE 2016 -432 1776 -432
WIRE 2240 -432 2016 -432
WIRE -704 -416 -1024 -416
WIRE 352 -400 -320 -400
WIRE 432 -400 352 -400
WIRE 576 -400 512 -400
WIRE 1776 -352 1776 -432
WIRE 2240 -352 2240 -432
WIRE -144 -288 -192 -288
WIRE -16 -288 -64 -288
WIRE -1024 -256 -1024 -416
WIRE -896 -256 -1024 -256
WIRE 1312 -256 1312 -336
WIRE -704 -240 -704 -416
WIRE -704 -240 -832 -240
WIRE -592 -240 -704 -240
WIRE 2016 -240 2016 -432
WIRE 2112 -240 2016 -240
WIRE 2240 -240 2240 -288
WIRE 2400 -240 2240 -240
WIRE -896 -224 -1024 -224
WIRE 2016 -192 2016 -240
WIRE -192 -160 -192 -288
WIRE -128 -160 -192 -160
WIRE -16 -160 -16 -288
WIRE -16 -160 -64 -160
WIRE -1216 -144 -1328 -144
WIRE -1024 -144 -1024 -224
WIRE -1024 -144 -1152 -144
WIRE 1776 -144 1776 -272
WIRE 1776 -144 1712 -144
WIRE 1872 -144 1776 -144
WIRE 1952 -144 1872 -144
WIRE 2240 -128 2240 -240
WIRE -1024 -96 -1024 -144
WIRE 1088 -96 912 -96
WIRE 1312 -80 1312 -176
WIRE 1312 -80 1152 -80
WIRE 1408 -80 1312 -80
WIRE 2016 -80 2016 -96
WIRE 2176 -80 2016 -80
WIRE 1040 -64 912 -64
WIRE 1088 -64 1040 -64
WIRE 2016 -48 2016 -80
WIRE 2112 -48 2016 -48
WIRE -320 -32 -320 -400
WIRE -288 -32 -320 -32
WIRE -192 -32 -192 -160
WIRE -192 -32 -208 -32
WIRE 192 -16 160 -16
WIRE 2016 -16 2016 -48
WIRE 2112 -16 2016 -16
WIRE -192 0 -192 -32
WIRE -176 0 -192 0
WIRE 352 0 352 -400
WIRE 352 0 256 0
WIRE 912 0 912 -64
WIRE 2240 0 2240 -32
WIRE 2400 0 2240 0
WIRE -16 16 -16 -160
WIRE -16 16 -112 16
WIRE 16 16 -16 16
WIRE 160 16 96 16
WIRE 192 16 160 16
WIRE 1776 16 1776 -144
WIRE 2016 16 2016 -16
WIRE -176 32 -320 32
WIRE 2240 32 2240 0
WIRE -1024 112 -1024 -16
WIRE 912 112 912 80
WIRE 1040 112 1040 -64
WIRE 1152 112 1040 112
WIRE 1312 112 1312 -80
WIRE 1312 112 1232 112
WIRE 160 128 160 16
WIRE 208 128 160 128
WIRE 352 128 352 0
WIRE 352 128 288 128
WIRE 1776 144 1776 96
WIRE 2016 144 2016 96
WIRE 2016 144 1776 144
WIRE 2240 144 2240 112
WIRE 2240 144 2016 144
WIRE 2240 192 2240 144
WIRE -704 624 -1008 624
WIRE -1312 704 -1312 624
WIRE -1008 784 -1008 624
WIRE -928 784 -1008 784
WIRE -704 800 -704 624
WIRE -704 800 -864 800
WIRE -624 800 -704 800
WIRE -1312 816 -1312 784
WIRE -928 816 -1312 816
WIRE -1312 848 -1312 816
WIRE -1312 992 -1312 928
FLAG -288 608 0
FLAG -288 528 Vsupply
FLAG -16 -160 Vtri
FLAG 224 32 0
FLAG -144 48 0
FLAG -320 32 Vref
FLAG 160 -16 Vref
FLAG 352 -400 Vsq
FLAG -144 -16 Vsupply
FLAG 576 -400 Vsupply
FLAG 1120 -112 Vsupply
FLAG 1120 -48 0
FLAG 1408 -80 Vpwm
FLAG -160 528 Vin
FLAG -160 608 0
FLAG 912 112 Vin
FLAG 912 -96 Vtri
FLAG 1312 -336 Vsupply
FLAG -864 -272 Vsupply
FLAG -864 -208 0
FLAG -1328 -144 Vin
FLAG 224 -32 Vsupply
FLAG -1024 112 Vref
FLAG -592 -240 Visc
FLAG 2240 192 0
FLAG 2016 -432 Vsupply
FLAG 2400 0 Ve2
FLAG 2400 -240 Vc2
FLAG 1712 -144 Vpwm
FLAG -1312 992 0
FLAG -1312 624 Vsupply
FLAG -896 832 0
FLAG -896 768 Vsupply
FLAG -624 800 Vref
FLAG 1872 -144 Vb1
FLAG 2112 -240 Vc1
FLAG 2112 -16 Vb2
FLAG 2112 -48 Ve1
SYMBOL voltage -288 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res -192 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 3.9k
SYMBOL cap -64 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 2.2n
SYMATTR SpiceLine Rser=10m
SYMBOL res 112 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 6k
SYMBOL res 304 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 528 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 560
SYMBOL res -48 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 27k
SYMBOL res 928 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 220
SYMBOL res 1136 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL voltage -160 512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(2.35 1 2.5k)
SYMBOL res 1296 -272 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res -1040 -112 R0
SYMATTR InstName R9
SYMATTR Value 22k
SYMBOL cap -1152 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL OpAmps\\opamp2 -864 -304 R0
WINDOW 3 37 87 Left 2
SYMATTR Value LM324
SYMATTR InstName U4
SYMBOL OpAmps\\opamp2 -144 -48 R0
WINDOW 3 37 87 Left 2
SYMATTR Value LM324
SYMATTR InstName U1
SYMBOL OpAmps\\opamp2 224 -64 R0
WINDOW 3 37 87 Left 2
SYMATTR Value LM393A
SYMATTR InstName U2
SYMBOL OpAmps\\opamp2 1120 -144 R0
WINDOW 3 37 87 Left 2
SYMATTR Value LM393A
SYMATTR InstName U3
SYMBOL res 1760 -368 R0
SYMATTR InstName R10
SYMATTR Value 4.7k
SYMBOL npn2 1952 -192 R0
WINDOW 0 4 -15 Left 2
WINDOW 3 39 44 Left 2
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL npn 2176 -128 R0
WINDOW 0 -36 20 Left 2
WINDOW 3 47 44 Left 2
SYMATTR InstName Q2
SYMATTR Value BC639
SYMBOL res 2224 16 R0
SYMATTR InstName R11
SYMATTR Value 22
SYMBOL res 2000 0 R0
SYMATTR InstName R12
SYMATTR Value 820
SYMBOL LED 2224 -352 R0
SYMATTR InstName D1
SYMATTR Value KA3529
SYMBOL res 1760 0 R0
SYMATTR InstName R13
SYMATTR Value 1.8k
SYMBOL res -1328 688 R0
SYMATTR InstName R14
SYMATTR Value 9.7k
SYMBOL res -1328 832 R0
SYMATTR InstName R15
SYMATTR Value 8.6k
SYMBOL OpAmps\\opamp2 -896 736 R0
WINDOW 3 41 90 Left 2
SYMATTR Value LM324
SYMATTR InstName U5
TEXT -328 688 Left 2 !.tran 0 100.4m 100m startup
TEXT -328 728 Left 2 !.include eee305.lib
TEXT -328 768 Left 2 !.include LM393A.5_1
TEXT 1672 296 Left 2 ;R3 changed from 18 to 22 (Ve2 = 2.2V  for Vpwm=5V and 101mA across it)\n \nChange to switching topology instead?
TEXT -328 808 Left 2 !.model KA3529 d(IS=1.00E-20 N=1.806 RS=2.616247 EG=2.26 XTI=3)
TEXT -328 848 Left 2 !.model BC639 NPN (AF= 1.00E+00 BF= 1.29E+02 BR= 2.92E+00 CJC= 4.85E-11 \n+ CJE= 1.17E-10 CJS= 0.00E+00 EG= 1.11E+00 FC= 5.00E-01 IKF= 9.06E-01 \n+ IKR= 1.00E+00 IRB= 2.38E-02 IS= 3.06E-15 ISC= 4.08E-14   ISE= 1.62E-16 \n+ ITF= 5.64E-01 KF=0.00E+00 MJC= 5.09E-01 MJE= 4.22E-01 MJS= 3.30E-01 \n+ NC=1.00E+00 NE= 1.00E+00 NF= 8.55E-01 NR= 9.10E-01 PTF=0.00E+00 \n+ RB= 1.65E+01 RBM= 1.73E-02 RC= 3.11E-01 RE= 1.26E-02 TF= 1.42E-09  \n+ TR= 0.00E+00 VAF= 7.24E+02 VAR=5.46E+01 VJC= 3.00E-01 VJE= 3.00E-01 \n+ VJS= 7.50E-01 VTF=9.99E+05 XCJC= 1.00E+00 XTB= 0.00E+00 \n+ XTF= 7.75E-01 XTI=3.00E+00)
TEXT -1216 728 Left 2 ;8.2k + 1.5k \nseries
TEXT -1216 872 Left 2 ;4.7k + 3.9k\nseries
TEXT 136 -792 Left 6 ;EE310 Team 9 Tx Design
TEXT -1176 -648 Left 4 ;Input Signal Conditioning\n- Offset: 2V absolute\n- Gain: 1
TEXT -64 -552 Left 4 ;Triangle Wave Generator
TEXT 1008 -552 Left 4 ;PWM Generator
TEXT 1960 -552 Left 4 ;LED Driver
TEXT -1112 296 Left 4 ;Offset Derivation\n- Gain: 0.47
TEXT -16 344 Left 4 ;Setup/Directives
TEXT -408 208 Left 2 ;Note: 6k = 2.7k + 3.3k series
RECTANGLE Normal -496 240 -1424 -512 2
RECTANGLE Normal -496 1136 -1424 384 2
RECTANGLE Normal 720 240 -432 -512 2
RECTANGLE Normal 1536 240 784 -512 2
RECTANGLE Normal 2496 240 1600 -512 2
RECTANGLE Normal 720 1136 -432 384 2
